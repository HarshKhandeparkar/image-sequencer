!function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return r(t[a][1][e]||e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}}()({1:[function(e,t,n){var i=e("../../../../ui/index"),r=e("./templates"),o=function(e){$(step.ui.querySelector("div.insertDiv")).append(e)};window.onload=function(){sequencer=ImageSequencer();var e=i.generateSequencerUi(sequencer,{}),t=i.generateStepUi(sequencer,{getStepTemplate:r.getStepTemplate,getToolsTemplate:r.getToolsTemplate,inputTemplates:r.inputTemplates,getStepInsertTemplate:r.getStepInsertTemplate,insertUi:o});i.setDefaultSequencer(sequencer,t,e,{}),$("#file-input-label").on("click",function(e){$("#fileInput").click()}),i.setSequenceSave();$("#resetButton").on("click",function(){confirm("Do you want to reset the sequence?")&&(window.location="/")}),$("#download-btn").click(function(){return download($(".step-thumbnail:last()").attr("src"),$(".step-thumbnail:last()").attr("alt")+".png","image/png"),!1}),i.setGifGenerator(function(e){var t=$("#js-download-gif-modal");$("#js-download-as-gif-button").one("click",function(){t.modal("close"),download(image,"index.gif","image/gif")}),$(".gif-close").click(function(){t.modal("close")});var n=document.getElementById("js-download-modal-gif-container");n.innerHTML="",n.appendChild(e),t.modal("open")}),i.setupCache("examples/","#clear-cache"),i.sw()}},{"../../../../ui/index":6,"./templates":2}],2:[function(e,t,n){function i(e){return e.charAt(0).toUpperCase()+e.substr(1)}var r={getRangeTemplate:function(e,t){return`\n    <div class="input-field">\n      <input class="validate target"\n        type="${t.type}"\n        name="${e}"\n        id="${e}"\n        value="${t.default}"\n        placeholder ="${t.placeholder||""}"\n        min="${t.min}"\n        max="${t.max}"\n        step="${t.step?t.step:"1"}"\n      >\n    </div>\n    `},getSelectInputTemplate:function(e,t){var n;for(var i in t.values)n+=`<option value="${t.values[i]}">${t.values[i]}</option>`;return`\n    <div name="${e} class="input-field"><select class="target" name="${e}">\n    ${n}\n    </select></div>\n    `},getTextTemplate:function(e,t){},getDefaultTemplate:function(e,t){return`\n    <div class="input-field>\n      <input class="validate target"\n        type="${t.type}"\n        name="${e}"\n        id="${e}"\n        value="${t.default}"\n        placeholder ="${t.placeholder||""}"\n      >\n    <label for="${e}">${i(e)}</label></div>\n    `}};t.exports={getStepTemplate:function(e){return'<li class="active step-wrapper">            <div class="collapsible-header"><b>'+i(e.name)+'</b></div>            <div class="collapsible-body" style="display:block;">              <div class="container">                <div class="row step">                  <form class="input-form">                    <div class="col m4 details">                      <div>                        <p>                          <i>'+(e.description||"")+'</i>                        </p>                      </div>                    </div>                  </form>                  <div class="col m8">                    <div class="load" style="display:none;"><i class="material-icons spin toggleIcon">donut_large</i></div>                    <img style="max-width=100%" class="img-thumbnail step-thumbnail responsive-img materialboxed"/>                    </div>                  </div>                </div>              </div>            </div>          </li>'},getToolsTemplate:function(){},getStepInsertTemplate:function(){},inputTemplates:r}},{}],3:[function(e,t,n){!function(e,i,r,o){"use strict";var a,s,c={URL:e.URL||e.webkitURL||e.mozURL||e.msURL,getUserMedia:(s=r.getUserMedia||r.webkitGetUserMedia||r.mozGetUserMedia||r.msGetUserMedia,s?s.bind(r):s),requestAnimFrame:e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame,requestTimeout:function(e,t){if(e=e||c.noop,t=t||0,!c.requestAnimFrame)return setTimeout(e,t);var n=(new Date).getTime(),i=new Object,r=c.requestAnimFrame;return i.value=r(function o(){(new Date).getTime()-n>=t?e.call():i.value=r(o)}),i},Blob:e.Blob||e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,btoa:(a=e.btoa||function(e){for(var t="",n=0,i=e.length,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=void 0,a=void 0,s=void 0,c=void 0,l=void 0,u=void 0,d=void 0;n<i;)c=(o=e.charCodeAt(n++))>>2,l=(3&o)<<4|(a=e.charCodeAt(n++))>>4,u=(15&a)<<2|(s=e.charCodeAt(n++))>>6,d=63&s,isNaN(a)?u=d=64:isNaN(s)&&(d=64),t=t+r.charAt(c)+r.charAt(l)+r.charAt(u)+r.charAt(d);return t},a?a.bind(e):c.noop),isObject:function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){return c.isObject(e)&&!Object.keys(e).length},isArray:function(e){return e&&Array.isArray(e)},isFunction:function(e){return e&&"function"==typeof e},isElement:function(e){return e&&1===e.nodeType},isString:function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},isSupported:{canvas:function(){var e=i.createElement("canvas");return e&&e.getContext&&e.getContext("2d")},webworkers:function(){return e.Worker},blob:function(){return c.Blob},Uint8Array:function(){return e.Uint8Array},Uint32Array:function(){return e.Uint32Array},videoCodecs:function(){var e=i.createElement("video"),t={mp4:!1,h264:!1,ogv:!1,ogg:!1,webm:!1};try{e&&e.canPlayType&&(t.mp4=""!==e.canPlayType('video/mp4; codecs="mp4v.20.8"'),t.h264=""!==(e.canPlayType('video/mp4; codecs="avc1.42E01E"')||e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),t.ogv=""!==e.canPlayType('video/ogg; codecs="theora"'),t.ogg=""!==e.canPlayType('video/ogg; codecs="theora"'),t.webm=-1!==e.canPlayType('video/webm; codecs="vp8, vorbis"'))}catch(e){}return t}()},noop:function(){},each:function(e,t){var n=void 0,i=void 0;if(c.isArray(e))for(n=-1,i=e.length;++n<i&&!1!==t(n,e[n]););else if(c.isObject(e))for(n in e)if(e.hasOwnProperty(n)&&!1===t(n,e[n]))break},mergeOptions:function(e,t){if(c.isObject(e)&&c.isObject(t)&&Object.keys){var n={};return c.each(e,function(t,i){n[t]=e[t]}),c.each(t,function(i,r){var o=t[i];c.isObject(o)&&e[i]?n[i]=c.mergeOptions(e[i],o):n[i]=o}),n}},setCSSAttr:function(e,t,n){c.isElement(e)&&(c.isString(t)&&c.isString(n)?e.style[t]=n:c.isObject(t)&&c.each(t,function(t,n){e.style[t]=n}))},removeElement:function(e){c.isElement(e)&&e.parentNode&&e.parentNode.removeChild(e)},createWebWorker:function(e){if(!c.isString(e))return{};try{var t=new c.Blob([e],{type:"text/javascript"}),n=c.URL.createObjectURL(t);return{objectUrl:n,worker:new Worker(n)}}catch(e){return""+e}},getExtension:function(e){return e.substr(e.lastIndexOf(".")+1,e.length)},getFontSize:function(){var e=arguments.length>0&&arguments[0]!==o?arguments[0]:{};if(!i.body||!1===e.resizeFont)return e.fontSize;var t=e.text,n=e.gifWidth,r=parseInt(e.fontSize,10),a=parseInt(e.minFontSize,10),s=i.createElement("div"),c=i.createElement("span");for(s.setAttribute("width",n),s.appendChild(c),c.innerHTML=t,c.style.fontSize=r+"px",c.style.textIndent="-9999px",c.style.visibility="hidden",i.body.appendChild(c);c.offsetWidth>n&&r>=a;)c.style.fontSize=--r+"px";return i.body.removeChild(c),r+"px"},webWorkerError:!1},l=Object.freeze({default:c}),u={validate:function(e){e=c.isObject(e)?e:{};var t={};return c.each(u.validators,function(n,i){var r=i.errorCode;if(!e[r]&&!i.condition)return(t=i).error=!0,!1}),delete t.condition,t},isValid:function(e){var t=!0!==u.validate(e).error;return t},validators:[{condition:c.isFunction(c.getUserMedia),errorCode:"getUserMedia",errorMsg:"The getUserMedia API is not supported in your browser"},{condition:c.isSupported.canvas(),errorCode:"canvas",errorMsg:"Canvas elements are not supported in your browser"},{condition:c.isSupported.webworkers(),errorCode:"webworkers",errorMsg:"The Web Workers API is not supported in your browser"},{condition:c.isFunction(c.URL),errorCode:"window.URL",errorMsg:"The window.URL API is not supported in your browser"},{condition:c.isSupported.blob(),errorCode:"window.Blob",errorMsg:"The window.Blob File API is not supported in your browser"},{condition:c.isSupported.Uint8Array(),errorCode:"window.Uint8Array",errorMsg:"The window.Uint8Array function constructor is not supported in your browser"},{condition:c.isSupported.Uint32Array(),errorCode:"window.Uint32Array",errorMsg:"The window.Uint32Array function constructor is not supported in your browser"}],messages:{videoCodecs:{errorCode:"videocodec",errorMsg:"The video codec you are trying to use is not supported in your browser"}}},d=Object.freeze({default:u}),p=function(){},m={sampleInterval:10,numWorkers:2,filter:"",gifWidth:200,gifHeight:200,interval:.1,numFrames:10,frameDuration:1,keepCameraOn:!1,images:[],video:null,webcamVideoElement:null,cameraStream:null,text:"",fontWeight:"normal",fontSize:"16px",minFontSize:"10px",resizeFont:!1,fontFamily:"sans-serif",fontColor:"#ffffff",textAlign:"center",textBaseline:"bottom",textXCoordinate:null,textYCoordinate:null,progressCallback:p,completeCallback:p,saveRenderingContexts:!1,savedRenderingContexts:[],crossOrigin:"Anonymous"},f=Object.freeze({default:m});function g(){return u.isValid()}function h(){var e,t,n,i,r,o=256,a=499,s=491,c=487,l=503,u=3*l,d=o-1,p=4,m=100,f=16,g=1<<f,h=10,v=10,b=g>>v,S=g<<h-v,w=6,y=(o>>3)*(1<<w),k=30,q=1024,x=256,C=1<<18,$=[],U=[],E=[],O=[];function I(e,t,n,i,a){var s,c,l,u,d,p,m;for((l=t-e)<-1&&(l=-1),(u=t+e)>o&&(u=o),s=t+1,c=t-1,p=1;s<u||c>l;){if(d=O[p++],s<u){m=r[s++];try{m[0]-=d*(m[0]-n)/C|0,m[1]-=d*(m[1]-i)/C|0,m[2]-=d*(m[2]-a)/C|0}catch(e){}}if(c>l){m=r[c--];try{m[0]-=d*(m[0]-n)/C|0,m[1]-=d*(m[1]-i)/C|0,m[2]-=d*(m[2]-a)/C|0}catch(e){}}}}function T(e,t,n,i,o){var a=r[t],s=e/q;a[0]-=s*(a[0]-n)|0,a[1]-=s*(a[1]-i)|0,a[2]-=s*(a[2]-o)|0}function F(e,t,n){var i,a,s,c,l,u,d,m,g,w;for(g=m=~(1<<31),d=u=-1,i=0;i<o;i++)(a=(w=r[i])[0]-e)<0&&(a=-a),(s=w[1]-t)<0&&(s=-s),a+=s,(s=w[2]-n)<0&&(s=-s),(a+=s)<m&&(m=a,u=i),(c=a-(U[i]>>f-p))<g&&(g=c,d=i),l=E[i]>>v,E[i]-=l,U[i]+=l<<h;return E[u]+=b,U[u]-=S,d}(function(e,a,s){var c,l;for(t=e,n=a,i=s,r=new Array(o),c=0;c<o;c++)r[c]=new Array(4),(l=r[c])[0]=l[1]=l[2]=(c<<p+8)/o|0,E[c]=g/o|0,U[c]=0}).apply(this,arguments);var W={map:function(e,t,n){var i,a,s,c,l,u,d;for(l=1e3,d=-1,a=(i=$[t])-1;i<o||a>=0;)i<o&&((s=(u=r[i])[1]-t)>=l?i=o:(i++,s<0&&(s=-s),(c=u[0]-e)<0&&(c=-c),(s+=c)<l&&((c=u[2]-n)<0&&(c=-c),(s+=c)<l&&(l=s,d=u[3])))),a>=0&&((s=t-(u=r[a])[1])>=l?a=-1:(a--,s<0&&(s=-s),(c=u[0]-e)<0&&(c=-c),(s+=c)<l&&((c=u[2]-n)<0&&(c=-c),(s+=c)<l&&(l=s,d=u[3]))));return d}};return W.process=function(){return function(){var r,o,d,f,g,h,v,b,S,C,$,U,E,W;for(n<u&&(i=1),e=30+(i-1)/3,U=t,E=0,W=n,C=($=n/(3*i))/m|0,b=q,(v=(h=y)>>w)<=1&&(v=0),r=0;r<v;r++)O[r]=b*((v*v-r*r)*x/(v*v));for(S=n<u?3:n%a!=0?3*a:n%s!=0?3*s:n%c!=0?3*c:3*l,r=0;r<$;)if(T(b,o=F(d=(255&U[E+0])<<p,f=(255&U[E+1])<<p,g=(255&U[E+2])<<p),d,f,g),0!==v&&I(v,o,d,f,g),(E+=S)>=W&&(E-=n),r++,0===C&&(C=1),r%C==0)for(b-=b/e,(v=(h-=h/k)>>w)<=1&&(v=0),o=0;o<v;o++)O[o]=b*((v*v-o*o)*x/(v*v))}(),function(){var e;for(e=0;e<o;e++)r[e][0]>>=p,r[e][1]>>=p,r[e][2]>>=p,r[e][3]=e}(),function(){var e,t,n,i,a,s,c,l;for(c=0,l=0,e=0;e<o;e++){for(n=e,i=(a=r[e])[1],t=e+1;t<o;t++)(s=r[t])[1]<i&&(n=t,i=s[1]);if(s=r[n],e!=n&&(t=s[0],s[0]=a[0],a[0]=t,t=s[1],s[1]=a[1],a[1]=t,t=s[2],s[2]=a[2],a[2]=t,t=s[3],s[3]=a[3],a[3]=t),i!=c){for($[c]=l+e>>1,t=c+1;t<i;t++)$[t]=e;c=i,l=e}}for($[c]=l+d>>1,t=c+1;t<256;t++)$[t]=d}(),function(){for(var e=[],t=new Array(o),n=0;n<o;n++)t[r[n][3]]=n;for(var i=0,a=0;a<o;a++){var s=t[a];e[i++]=r[s][0],e[i++]=r[s][1],e[i++]=r[s][2]}return e}()},W}function v(){try{this.onmessage=function(t){var n,i=t.data||{};i.gifshot&&(n=e.run(i),postMessage(n))}}catch(e){}var e={dataToRGB:function(e,t,n){for(var i=t*n*4,r=0,o=[];r<i;)o.push(e[r++]),o.push(e[r++]),o.push(e[r++]),r++;return o},componentizedPaletteToArray:function(e){e=e||[];for(var t=[],n=0;n<e.length;n+=3){var i=e[n],r=e[n+1],o=e[n+2];t.push(i<<16|r<<8|o)}return t},processFrameWithQuantizer:function(e,t,n,i){for(var r=this.dataToRGB(e,t,n),o=new h(r,r.length,i),a=o.process(),s=new Uint32Array(this.componentizedPaletteToArray(a)),c=t*n,l=new Uint8Array(c),u=0,d=0;d<c;d++){var p=r[u++],m=r[u++],f=r[u++];l[d]=o.map(p,m,f)}return{pixels:l,palette:s}},run:function(e){var t=e=e||{},n=t.height,i=(t.palette,t.sampleInterval),r=t.width,o=e.data;return this.processFrameWithQuantizer(o,r,n,i)}};return e}function b(e,t,n,i){var r=0,a=(i=i===o?{}:i).loop===o?null:i.loop,s=i.palette===o?null:i.palette;if(t<=0||n<=0||t>65535||n>65535)throw"Width/Height invalid.";e[r++]=71,e[r++]=73,e[r++]=70,e[r++]=56,e[r++]=57,e[r++]=97;if(e[r++]=255&t,e[r++]=t>>8&255,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=0|(null!==s?128:0),e[r++]=0,e[r++]=0,null!==a){if(a<0||a>65535)throw"Loop count invalid.";e[r++]=33,e[r++]=255,e[r++]=11,e[r++]=78,e[r++]=69,e[r++]=84,e[r++]=83,e[r++]=67,e[r++]=65,e[r++]=80,e[r++]=69,e[r++]=50,e[r++]=46,e[r++]=48,e[r++]=3,e[r++]=1,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=0}var c=!1;this.addFrame=function(t,n,i,a,l,u){if(!0===c&&(--r,c=!1),u=u===o?{}:u,t<0||n<0||t>65535||n>65535)throw"x/y invalid.";if(i<=0||a<=0||i>65535||a>65535)throw"Width/Height invalid.";if(l.length<i*a)throw"Not enough pixels for the frame size.";var d=!0,p=u.palette;if(p!==o&&null!==p||(d=!1,p=s),p===o||null===p)throw"Must supply either a local or global palette.";for(var m=function(e){var t=e.length;if(t<2||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}(p),f=0;m>>=1;)++f;m=1<<f;var g=u.delay===o?0:u.delay,h=u.disposal===o?0:u.disposal;if(h<0||h>3)throw"Disposal out of range.";var v=!1,b=0;if(u.transparent!==o&&null!==u.transparent&&(v=!0,(b=u.transparent)<0||b>=m))throw"Transparent color index.";if((0!==h||v||0!==g)&&(e[r++]=33,e[r++]=249,e[r++]=4,e[r++]=h<<2|(!0===v?1:0),e[r++]=255&g,e[r++]=g>>8&255,e[r++]=b,e[r++]=0),e[r++]=44,e[r++]=255&t,e[r++]=t>>8&255,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=255&i,e[r++]=i>>8&255,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=!0===d?128|f-1:0,!0===d)for(var S=0,w=p.length;S<w;++S){var y=p[S];e[r++]=y>>16&255,e[r++]=y>>8&255,e[r++]=255&y}r=function(e,t,n,i){e[t++]=n;var r=t++,a=1<<n,s=a-1,c=a+1,l=c+1,u=n+1,d=0,p=0;function m(n){for(;d>=n;)e[t++]=255&p,p>>=8,d-=8,t===r+256&&(e[r]=255,r=t++)}function f(e){p|=e<<d,d+=u,m(8)}var g=i[0]&s,h={};f(a);for(var v=1,b=i.length;v<b;++v){var S=i[v]&s,w=g<<8|S,y=h[w];if(y===o){for(p|=g<<d,d+=u;d>=8;)e[t++]=255&p,p>>=8,d-=8,t===r+256&&(e[r]=255,r=t++);4096===l?(f(a),l=c+1,u=n+1,h={}):(l>=1<<u&&++u,h[w]=l++),g=S}else g=y}f(g),f(c),m(1),r+1===t?e[r]=0:(e[r]=t-r-1,e[t++]=0);return t}(e,r,f<2?2:f,l)},this.end=function(){return!1===c&&(e[r++]=59,c=!0),r}}var S=function(){},w=function(e){this.canvas=null,this.ctx=null,this.repeat=0,this.frames=[],this.numRenderedFrames=0,this.onRenderCompleteCallback=S,this.onRenderProgressCallback=S,this.workers=[],this.availableWorkers=[],this.generatingGIF=!1,this.options=e,this.initializeWebWorkers(e)};w.prototype={workerMethods:v(),initializeWebWorkers:function(e){var t,n=h.toString()+"("+v.toString()+"());",r=void 0,o=void 0,a=void 0,s=-1,l="";for(t=e.numWorkers;++s<t;)r=c.createWebWorker(n),c.isObject(r)?(o=r.objectUrl,a=r.worker,this.workers.push({worker:a,objectUrl:o}),this.availableWorkers.push(a)):(l=r,c.webWorkerError=!!r);this.workerError=l,this.canvas=i.createElement("canvas"),this.canvas.width=e.gifWidth,this.canvas.height=e.gifHeight,this.ctx=this.canvas.getContext("2d"),this.frames=[]},getWorker:function(){return this.availableWorkers.pop()},freeWorker:function(e){this.availableWorkers.push(e)},byteMap:function(){for(var e=[],t=0;t<256;t++)e[t]=String.fromCharCode(t);return e}(),bufferToString:function(e){for(var t=e.length,n="",i=-1;++i<t;)n+=this.byteMap[e[i]];return n},onFrameFinished:function(e){var t=this,n=t.frames,i=!!(t.options.images||[]).length,r=n.every(function(e){return!e.beingProcessed&&e.done});t.numRenderedFrames++,i&&e(t.numRenderedFrames/n.length),t.onRenderProgressCallback(.75*t.numRenderedFrames/n.length),r?t.generatingGIF||t.generateGIF(n,t.onRenderCompleteCallback):c.requestTimeout(function(){t.processNextFrame()},1)},processFrame:function(e){var t=this,n=(this.options,this.options),i=n.progressCallback,r=n.sampleInterval,a=this.frames,s=void 0,c=void 0,l=function(){var e=(arguments.length>0&&arguments[0]!==o?arguments[0]:{}).data;delete s.data,s.pixels=Array.prototype.slice.call(e.pixels),s.palette=Array.prototype.slice.call(e.palette),s.done=!0,s.beingProcessed=!1,t.freeWorker(c),t.onFrameFinished(i)};(s=a[e]).beingProcessed||s.done?this.onFrameFinished():(s.sampleInterval=r,s.beingProcessed=!0,s.gifshot=!0,(c=this.getWorker())?(c.onmessage=l,c.postMessage(s)):l({data:t.workerMethods.run(s)}))},startRendering:function(e){this.onRenderCompleteCallback=e;for(var t=0;t<this.options.numWorkers&&t<this.frames.length;t++)this.processFrame(t)},processNextFrame:function(){for(var e=-1,t=0;t<this.frames.length;t++){var n=this.frames[t];if(!n.done&&!n.beingProcessed){e=t;break}}e>=0&&this.processFrame(e)},generateGIF:function(e,t){var n=[],i={loop:this.repeat},r=this.options,o=r.interval,a=r.frameDuration,s=!!r.images.length,l=r.gifHeight,u=r.gifWidth,d=new b(n,u,l,i),p=this.onRenderProgressCallback,m=s?100*o:0,f=void 0;this.generatingGIF=!0,c.each(e,function(t,n){var i=n.palette;p(.75+.25*n.position*1/e.length);for(var r=0;r<a;r++)d.addFrame(0,0,u,l,n.pixels,{palette:i,delay:m})}),d.end(),p(1),this.frames=[],this.generatingGIF=!1,c.isFunction(t)&&(f=this.bufferToString(n),t("data:image/gif;base64,"+c.btoa(f)))},setRepeat:function(e){this.repeat=e},addFrame:function(e,t){t=c.isObject(t)?t:{};var n=this.ctx,i=this.options,r=i.gifWidth,o=i.gifHeight,a=c.getFontSize(t),s=t,l=s.filter,u=s.fontColor,d=s.fontFamily,p=s.fontWeight,m=(s.gifHeight,s.gifWidth,s.text),f=s.textAlign,g=s.textBaseline,h=t.textXCoordinate?t.textXCoordinate:"left"===f?1:"right"===f?r:r/2,v=t.textYCoordinate?t.textYCoordinate:"top"===g?1:"center"===g?o/2:o,b=p+" "+a+" "+d,S=void 0;try{n.filter=l,n.drawImage(e,0,0,r,o),m&&(n.font=b,n.fillStyle=u,n.textAlign=f,n.textBaseline=g,n.fillText(m,h,v)),S=n.getImageData(0,0,r,o),this.addFrameImageData(S)}catch(e){return""+e}},addFrameImageData:function(){var e=arguments.length>0&&arguments[0]!==o?arguments[0]:{},t=this.frames,n=e.data;this.frames.push({data:n,width:e.width,height:e.height,palette:null,dithering:null,done:!1,beingProcessed:!1,position:t.length})},onRenderProgress:function(e){this.onRenderProgressCallback=e},isRendering:function(){return this.generatingGIF},getBase64GIF:function(e){var t=this;t.startRendering(function(n){t.destroyWorkers(),c.requestTimeout(function(){e(n)},0)})},destroyWorkers:function(){if(!this.workerError){var e=this.workers;c.each(e,function(e,t){var n=t.worker,i=t.objectUrl;n.terminate(),c.URL.revokeObjectURL(i)})}}};var y=function(){},k={getGIF:function(){var e=arguments.length>0&&arguments[0]!==o?arguments[0]:{},t=arguments[1];t=c.isFunction(t)?t:y;var n=i.createElement("canvas"),r=void 0,a=!!e.images.length,s=e.cameraStream,l=e.crop,u=e.filter,d=e.fontColor,p=e.fontFamily,m=e.fontWeight,f=e.keepCameraOn,g=(e.numWorkers,e.progressCallback),h=e.saveRenderingContexts,v=e.savedRenderingContexts,b=e.text,S=e.textAlign,k=e.textBaseline,q=e.videoElement,x=e.videoHeight,C=e.videoWidth,$=e.webcamVideoElement,U=Number(e.gifWidth),E=Number(e.gifHeight),O=Number(e.interval),I=(Number(e.sampleInterval),a?0:1e3*O),T=[],F=v.length?v.length:e.numFrames,W=F,H=new w(e),A=c.getFontSize(e),M=e.textXCoordinate?e.textXCoordinate:"left"===S?1:"right"===S?U:U/2,P=e.textYCoordinate?e.textYCoordinate:"top"===k?1:"center"===k?E/2:E,R=m+" "+A+" "+p,L=l?Math.floor(l.scaledWidth/2):0,j=l?C-l.scaledWidth:0,D=l?Math.floor(l.scaledHeight/2):0,V=l?x-l.scaledHeight:0;F=F!==o?F:10,O=O!==o?O:.1,n.width=U,n.height=E,r=n.getContext("2d"),function e(){v.length||0!==q.currentTime?function e(){var n=W-1;function i(){var i;h&&T.push(r.getImageData(0,0,U,E)),b&&(r.font=R,r.fillStyle=d,r.textAlign=S,r.textBaseline=k,r.fillText(b,M,P)),i=r.getImageData(0,0,U,E),H.addFrameImageData(i),g((F-(W=n))/F),n>0&&c.requestTimeout(e,I),W||H.getBase64GIF(function(e){t({error:!1,errorCode:"",errorMsg:"",image:e,cameraStream:s,videoElement:q,webcamVideoElement:$,savedRenderingContexts:T,keepCameraOn:f})})}v.length?(r.putImageData(v[F-W],0,0),i()):function e(){try{j>C&&(j=C),V>x&&(V=x),L<0&&(L=0),D<0&&(D=0),r.filter=u,r.drawImage(q,L,D,j,V,0,0,U,E),i()}catch(t){if("NS_ERROR_NOT_AVAILABLE"!==t.name)throw t;c.requestTimeout(e,100)}}()}():c.requestTimeout(e,100)}()},getCropDimensions:function(){var e=arguments.length>0&&arguments[0]!==o?arguments[0]:{},t=e.videoWidth,n=e.videoHeight,i=e.gifWidth,r=e.gifHeight,a={width:0,height:0,scaledWidth:0,scaledHeight:0};return t>n?(a.width=Math.round(t*(r/n))-i,a.scaledWidth=Math.round(a.width*(n/r))):(a.height=Math.round(n*(i/t))-r,a.scaledHeight=Math.round(a.height*(t/i))),a}},q={loadedData:!1,defaultVideoDimensions:{width:640,height:480},findVideoSize:function e(t){e.attempts=e.attempts||0;var n=t.cameraStream,i=t.completedCallback,r=t.videoElement;r&&(r.videoWidth>0&&r.videoHeight>0?(r.removeEventListener("loadeddata",q.findVideoSize),i({videoElement:r,cameraStream:n,videoWidth:r.videoWidth,videoHeight:r.videoHeight})):e.attempts<10?(e.attempts+=1,c.requestTimeout(function(){q.findVideoSize(t)},400)):i({videoElement:r,cameraStream:n,videoWidth:q.defaultVideoDimensions.width,videoHeight:q.defaultVideoDimensions.height}))},onStreamingTimeout:function(e){c.isFunction(e)&&e({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - Timed out while trying to start streaming",image:null,cameraStream:{}})},stream:function(e){var t=c.isArray(e.existingVideo)?e.existingVideo[0]:e.existingVideo,n=e.cameraStream,i=e.completedCallback,r=e.streamedCallback,o=e.videoElement;if(c.isFunction(r)&&r(),t){if(c.isString(t))o.src=t,o.innerHTML='<source src="'+t+'" type="video/'+c.getExtension(t)+'" />';else if(t instanceof Blob){try{o.src=c.URL.createObjectURL(t)}catch(e){}o.innerHTML='<source src="'+t+'" type="'+t.type+'" />'}}else if(o.mozSrcObject)o.mozSrcObject=n;else if(c.URL)try{o.srcObject=n,o.src=c.URL.createObjectURL(n)}catch(e){o.srcObject=n}o.play(),c.requestTimeout(function e(){e.count=e.count||0,!0===q.loadedData?(q.findVideoSize({videoElement:o,cameraStream:n,completedCallback:i}),q.loadedData=!1):(e.count+=1)>10?q.findVideoSize({videoElement:o,cameraStream:n,completedCallback:i}):e()},0)},startStreaming:function(e){var t=c.isFunction(e.error)?e.error:c.noop,n=c.isFunction(e.streamed)?e.streamed:c.noop,r=c.isFunction(e.completed)?e.completed:c.noop,o=e.crossOrigin,a=e.existingVideo,s=e.lastCameraStream,l=e.options,u=e.webcamVideoElement,d=c.isElement(a)?a:u||i.createElement("video");o&&(d.crossOrigin=l.crossOrigin),d.autoplay=!0,d.loop=!0,d.muted=!0,d.addEventListener("loadeddata",function(e){q.loadedData=!0,l.offset&&(d.currentTime=l.offset)}),a?q.stream({videoElement:d,existingVideo:a,completedCallback:r}):s?q.stream({videoElement:d,cameraStream:s,streamedCallback:n,completedCallback:r}):c.getUserMedia({video:!0},function(e){q.stream({videoElement:d,cameraStream:e,streamedCallback:n,completedCallback:r})},t)},startVideoStreaming:function(e){var t=arguments.length>1&&arguments[1]!==o?arguments[1]:{},n=t.timeout!==o?t.timeout:0,i=t.callback,r=t.webcamVideoElement,a=void 0;n>0&&(a=c.requestTimeout(function(){q.onStreamingTimeout(i)},1e4)),q.startStreaming({error:function(){i({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - the user probably denied permission",image:null,cameraStream:{}})},streamed:function(){clearTimeout(a)},completed:function(){var t=arguments.length>0&&arguments[0]!==o?arguments[0]:{},n=t.cameraStream,i=t.videoElement,r=t.videoHeight,a=t.videoWidth;e({cameraStream:n,videoElement:i,videoHeight:r,videoWidth:a})},lastCameraStream:t.lastCameraStream,webcamVideoElement:r,crossOrigin:t.crossOrigin,options:t})},stopVideoStreaming:function(e){var t=e=c.isObject(e)?e:{},n=t.keepCameraOn,i=t.videoElement,r=t.webcamVideoElement,o=e.cameraStream||{},a=o.getTracks&&o.getTracks()||[],s=!!a.length,l=a[0];!n&&s&&c.isFunction(l.stop)&&l.stop(),c.isElement(i)&&!r&&(i.pause(),c.isFunction(c.URL.revokeObjectURL)&&!c.webWorkerError&&i.src&&c.URL.revokeObjectURL(i.src),c.removeElement(i))}};function x(e){e=c.isObject(e)?e:{},q.stopVideoStreaming(e)}function C(e,t){var n=e.options||{},r=n.images,o=n.video,a=Number(n.gifWidth),s=Number(n.gifHeight),l=(Number(n.numFrames),e.cameraStream),u=e.videoElement,d=e.videoWidth,p=e.videoHeight,m=k.getCropDimensions({videoWidth:d,videoHeight:p,gifHeight:s,gifWidth:a}),f=t;n.crop=m,n.videoElement=u,n.videoWidth=d,n.videoHeight=p,n.cameraStream=l,c.isElement(u)&&(u.width=a+m.width,u.height=s+m.height,n.webcamVideoElement||(c.setCSSAttr(u,{position:"fixed",opacity:"0"}),i.body.appendChild(u)),u.play(),k.getGIF(n,function(e){r&&r.length||o&&o.length||x(e),f(e)}))}function $(e,t){if(t=c.isFunction(e)?e:t,e=c.isObject(e)?e:{},c.isFunction(t)){var n=c.mergeOptions(m,e)||{},r=e.cameraStream,a=n.images,s=a?a.length:0,l=n.video,d=n.webcamVideoElement;n=c.mergeOptions(n,{gifWidth:Math.floor(n.gifWidth),gifHeight:Math.floor(n.gifHeight)}),s?function(){var e=arguments.length>0&&arguments[0]!==o?arguments[0]:{},t=e.callback,n=e.images,r=e.options,a=e.imagesLength,s=u.validate({getUserMedia:!0,"window.URL":!0}),l=[],d=0,p=void 0,m=void 0;if(s.error)return t(s);function f(){c.each(l,function(e,t){t&&(t.text?m.addFrame(t.img,r,t.text):m.addFrame(t,r))}),function(e,t){e.getBase64GIF(function(e){t({error:!1,errorCode:"",errorMsg:"",image:e})})}(m,t)}m=new w(r),c.each(n,function(e,n){var o=n;n.src&&(o=o.src),c.isElement(o)?(r.crossOrigin&&(o.crossOrigin=r.crossOrigin),l[e]=o,(d+=1)===a&&f()):c.isString(o)&&(p=new Image,r.crossOrigin&&(p.crossOrigin=r.crossOrigin),function(i){n.text&&(i.text=n.text),i.onerror=function(e){var n=void 0;if(0==--a)return(n={}).error="None of the requested images was capable of being retrieved",t(n)},i.onload=function(t){n.text?l[e]={img:i,text:i.text}:l[e]=i,(d+=1)===a&&f(),c.removeElement(i)},i.src=o}(p),c.setCSSAttr(p,{position:"fixed",opacity:"0"}),i.body.appendChild(p))})}({images:a,imagesLength:s,callback:t,options:n}):l?function(){var e=arguments.length>0&&arguments[0]!==o?arguments[0]:{},t=e.callback,n=e.existingVideo,i=e.options,r=u.validate({getUserMedia:!0,"window.URL":!0}),a=void 0,s=void 0;if(r.error)return t(r);if(c.isElement(n)&&n.src){if(s=n.src,a=c.getExtension(s),!c.isSupported.videoCodecs[a])return t(u.messages.videoCodecs)}else c.isArray(n)&&c.each(n,function(e,t){if(a=t instanceof Blob?t.type.substr(t.type.lastIndexOf("/")+1,t.length):t.substr(t.lastIndexOf(".")+1,t.length),c.isSupported.videoCodecs[a])return n=t,!1});q.startStreaming({completed:function(e){e.options=i||{},C(e,t)},existingVideo:n,crossOrigin:i.crossOrigin,options:i})}({existingVideo:l,callback:t,options:n}):function(){var e=arguments.length>0&&arguments[0]!==o?arguments[0]:{},t=e.callback,n=e.lastCameraStream,i=e.options,r=e.webcamVideoElement;if(!g())return t(u.validate());i.savedRenderingContexts.length?k.getGIF(i,function(e){t(e)}):q.startVideoStreaming(function(){var e=arguments.length>0&&arguments[0]!==o?arguments[0]:{};e.options=i||{},C(e,t)},{lastCameraStream:n,callback:t,webcamVideoElement:r,crossOrigin:i.crossOrigin})}({lastCameraStream:r,callback:t,webcamVideoElement:d,options:n})}}var U={utils:l,error:d,defaultOptions:f,createGIF:$,takeSnapShot:function(e,t){if(t=c.isFunction(e)?e:t,e=c.isObject(e)?e:{},c.isFunction(t)){var n=c.mergeOptions(m,e);$(c.mergeOptions(n,{interval:.1,numFrames:1,gifWidth:Math.floor(n.gifWidth),gifHeight:Math.floor(n.gifHeight)}),t)}},stopVideoStreaming:x,isSupported:function(){return u.isValid()},isWebCamGIFSupported:g,isExistingVideoGIFSupported:function(e){var t=!1;if(c.isArray(e)&&e.length){if(c.each(e,function(e,n){c.isSupported.videoCodecs[n]&&(t=!0)}),!t)return!1}else if(c.isString(e)&&e.length&&!c.isSupported.videoCodecs[e])return!1;return u.isValid({getUserMedia:!0})},isExistingImagesGIFSupported:function(){return u.isValid({getUserMedia:!0})},VERSION:"0.4.5"};"function"==typeof define&&define.amd?define([],function(){return U}):void 0!==n?t.exports=U:e.gifshot=U}("undefined"!=typeof window?window:{},"undefined"!=typeof document?document:{createElement:function(){}},"undefined"!=typeof window?window.navigator:{})},{}],4:[function(e,t,n){t.exports={notify:function(e,t,n,i,r){if(0==$("#"+t).length){var o=document.createElement("span");for(className in o.innerHTML=`<b>${r||""} ${e} </b>`,o.id=t,n)o.classList.add(className);$("body").append(o)}$("#"+t).fadeIn(500).delay(i||200).fadeOut(500)},setCacheShortcut:function(){var e=!1,t=!1,n={ctrlcmd:[17,91,93,224],E:69};function i(t){e||n.ctrlcmd.includes(t.which)&&(e=!0,$(document).off("keydown"),$(document).on("keydown",r))}function r(i){e&&!t&&i.which==n.E&&$("#clear-cache").click()}$(document).on("keydown",i),$(document).on("keyup",function(r){(n.ctrlcmd.includes(r.which)||r.which==n.E)&&(e=!1,t=!1,$(document).off("keydown"),$(document).on("keydown",i))})}}},{}],5:[function(e,t,n){function i(e,t,n,i){var r=ImageSequencer();function o(t){var n=document.createElement("img");n.classList.add("preview-thumbnail"),n.src=t;$(i).each(function(){$(this).attr("data-value")===e&&$(this).append(n)})}r.loadImage(n,function(){r=r.addSteps("resize",{resize:"40%"}),"crop"===e?r.addSteps(e,t).run(o):r.addSteps(e,{[e]:t}).run(o)})}t.exports={generatePreview:i,updatePreviews:function(e,t){$(t+" img").remove();var n={brightness:"20",saturation:"5",rotate:90,contrast:90,crop:{x:0,y:0,w:"(50%)",h:"(50%)",noUI:!0}};Object.keys(n).forEach(function(r,o){i(r,Object.values(n)[o],e,t)})}}},{}],6:[function(e,t,n){var i=e("./sequencer/sequence/defaultHtmlSequencerUi"),r=e("./sequencer/step/defaultHtmlStepUi"),o=e("./sequencer/sequence/saveSequence"),a=e("./sequencer/sequence/gif"),s=e("./sw/cache"),c=e("./sw/sw"),l=e("./sequencer/sequence/urlHash"),u=e("./sequencer/setDefaultSequencer");t.exports={generateSequencerUi:i,generateStepUi:r,setSequenceSave:o,setGifGenerator:a,setupCache:s,sw:c,urlHash:l,setDefaultSequencer:u}},{"./sequencer/sequence/defaultHtmlSequencerUi":7,"./sequencer/sequence/gif":8,"./sequencer/sequence/saveSequence":9,"./sequencer/sequence/urlHash":11,"./sequencer/setDefaultSequencer":12,"./sequencer/step/defaultHtmlStepUi":13,"./sw/cache":16,"./sw/sw":17}],7:[function(e,t,n){var i=e("./urlHash.js");t.exports=function(e,t){var n=(t=t||{}).addStepSel||"#addStep",r=t.removeStepSel||"button.remove",o=t.selectStepSel||"#selectStep";function a(){var t=i.getUrlHashParameter("steps");t&&(e.importString(t),e.run({index:0})),i.setUrlHashParameter("steps",sequencer.toString())}return t.addStepBtnSel=t.addStepBtnSel||".add-step-btn",t.quickBtnsSel=t.quickBtnsSel||".quick-btns .quick-btn",{sequencer:e,options:t,onLoad:function(e=function(){}){a(),$(o).val()||e(),handleSaveSequence()},importStepsFromUrlHash:a,selectNewStepUi:function(t){var i=$(o).val();$(`${n} .info`).html(e.modulesInfo(i).description),t&&t()},removeStepUi:function(){var e=$(r).index(this)+1;sequencer.removeSteps(e).run({index:e-1}),i.setUrlHashParameter("steps",sequencer.toString()),handleSaveSequence()},addStepUi:function(r){if("none"!=$(o).val()){var a=$(o).val(),s=1;sequencer.sequences[a]?s=sequencer.sequences[a].length:sequencer.modules[a][1].length&&(s=sequencer.modules[a][1].length),e.addSteps(a,t).run({index:e.images.image1.steps.length-s-1}),$(`${n} ${stepInfoSel}`).html("Select a new module to add to your sequence.");var c=sequencer.images.image1.steps.length>1;r&&r(c),i.setUrlHashParameter("steps",e.toString())}}}}},{"./urlHash.js":11}],8:[function(e,t,n){var i=e("gifshot");t.exports=function(e,t,n,r){var o=!1;$(t||".view-as-gif-btn").on("click",function(t){if(!o){o=!0;var a=t.target;a.disabled=!0;try{for(var s=$(n||".step-thumbnail"),c=[],l=0;l<s.length;l++)c.push(s[l].src);var u={gifWidth:s[0].width,gifHeight:s[0].height,images:c,frameDuration:7};i.createGIF(u,function(t){if(!t.error){var n=t.image,i=document.createElement("img");i.classList.add(r||"gif-img"),i.src=n,e(i),a.disabled=!1,o=!1}})}catch(e){console.error(e),a.disabled=!1,o=!1}}})}},{gifshot:3}],9:[function(e,t,n){var{refreshOptions:i}=e("./setModuleSelector");t.exports=function(e,t,n){$(e||"#save-seq").click(()=>{var e=window.prompt("Please give a name to your sequence... (Saved sequence will only be available in this browser).");e&&(e+=" (local)",sequencer.saveSequence(e,sequencer.toString()),sequencer.loadModules(),n&&n(e),i(t))})}},{"./setModuleSelector":10}],10:[function(e,t,n){function i(e){var t=sequencer.modulesInfo(),n=$(e||"#selectStep");for(var i in n.html(""),t)t[i]&&t[i].name&&n.append('<option value="'+i+'">'+t[i].name+"</option>");n.append('<option value="none" disabled selected>More modules...</option>')}t.exports={setModuleSelector:function(e){i(),function(e){$(e.options.quickBtnsSel).on("click",function(){$(e.options.quickBtnsSel).removeClass("selected"),$(this).addClass("selected"),newStep=$(this).attr("data-value"),$(e.options.stepSelectSel).val(newStep),e.selectNewStepUi(),e.addStepUi(),$(this).removeClass("selected")})}(e),$(e.options.stepSelectSel).on("change",e.selectNewStepUi),$(e.options.addStepBtnSel).on("click",e.addStepUi)},refreshOptions:i}},{}],11:[function(e,t,n){function i(){var e=window.location.hash;e&&(e=e.split("#")[1]);var t={};return(e.includes("&")?e.split("&"):[e]).forEach(function(e,n){""!=(e=e.split("="))[0]&&(t[e[0]]=e[1])}),t}function r(e){var t=Object.keys(e),n=Object.values(e),i=[];t.forEach(function(e,r){""!=e&&i.push(t[r]+"="+n[r])});var r=i.join("&");window.location.hash=r}t.exports={getUrlHashParameter:function(e){return i()[e]},setUrlHashParameter:function(e,t){var n=i();n[e]=t,r(n)},getUrlHashParameters:i,setUrlHashParameters:r}},{}],12:[function(e,t,n){var i=e("../DOM/insertPreview");t.exports=function(e,t,n,r){uiUtils.urlHash.getUrlHashParameter("src")?e.loadImage(getUrlHashParameter("src"),ui.onLoad):e.loadImage(r.loadImage||"images/tulips.png",n.onLoad),$("body").on("click",r.remove-btn||"button.remove",n.removeStepUi),e.setInputStep({dropZoneSelector:r.dropZoneSelector||"#dropzone",fileInputSelector:r.fileInputSelector||"#fileInput",takePhotoSelector:r.takePhotoSelector||"#take-photo",onLoad:function(r){var o=r.target,a=e.images.image1.steps[0];a.output.src=o.result,e.run({index:0}),a.options.step.imgElement.src=o.result,i.updatePreviews(o.result,n.options.addStepSel),i.updatePreviews(e.images.image1.steps[0].options.step.imgElement.src,t.options.insertStepSel||".insert-step")},onTakePhoto:function(t){var n=e.images.image1.steps[0];n.output.src=t,e.run({index:0}),n.options.step.imgElement.src=t}}),getUrlHashParameter("src")?i.updatePreviews(getUrlHashParameter("src"),n.options.addStepSel):i.updatePreviews(r.loadImage||"images/tulips.png",n.options.addStepSel)}},{"../DOM/insertPreview":5}],13:[function(e,t,n){var i=e("../step/intermediateHtmlStepUi"),r=e("../sequence/urlHash"),o=e("./mapHtmlTypes"),{notify:a}=e("../../DOM/helpers");function s(e,t){var n=(t=t||{}).stepsSel||document.querySelector("#steps ul"),s=t.getStepTemplate,c=t.getToolsTemplate,l=t.stepWrapperSel||".step-wrapper",u=t.stepImgClass||".step-thumbnail",d=t.saveOptionsInputCb,p=t.optionsSavedCb,m=t.initializeInputs,f=t.inputTemplates,g=t.onSetupCb,h=t.onDrawCb,v=t.setInputDefaultCb,b=t.onCompleteCb;return{getPreview:function(){return step.imgElement},onSetup:function(h,v){h.options&&h.options.description&&(h.description=h.options.description),h.ui=s(h);var b=c(h),S=i(e,h,t),w=new DOMParser;if(h.ui=w.parseFromString(h.ui,"text/html"),h.ui=h.ui.querySelector(l),h.imgLinkElements=h.ui.querySelectorAll(".img-link"),h.imgElement=h.ui.querySelector(u),h.imgElement.alt=h.name,e.modulesInfo().hasOwnProperty(h.name)){var y=e.modulesInfo(h.name).inputs,k=e.modulesInfo(h.name).outputs,q=Object.assign(y,k);for(var x in q){var C=y.hasOwnProperty(x),U="",E=C?o(y[x]):{};C?"select"==E.type?U+=f.getSelectInputTemplate(x,E):"text"==E.type?U+=f.getTextTemplate(x,E):"range"==E.type?U+=f.getRangeTemplate(x,E):U+=f.getDefaultTemplate(x,E):U+='<span class="output"></span>';var O=document.createElement("div");O.className="det",O.setAttribute("name",x);var I=E.desc||"";O.innerHTML=`\n        <span>${I}</span>\n        ${U}`,$(h.ui.querySelector("div.details")).append(O)}$(h.ui.querySelector("div.details")).append('<div><p><button type="submit" class="btn btn-save" disabled="true" >Apply</button><span> Press apply to see changes</span></p></div>')}"load-image"!=h.name?(h.ui.querySelector("div.details").appendChild(w.parseFromString(b,"text/html").querySelector(".tools")),$(h.ui.querySelectorAll(".remove-btn")).on("click",a("Step Removed","step-removed-notification","notification")),$(h.ui.querySelectorAll(".insert-step-btn")).on("click",function(){S.insertStep(h.ID)}),v.index==e.images.image1.steps.length?($(n).append(h.ui),$(`${n} li:nth-last-child(1) .insert-step-btn`).prop("disabled",!0),$(`${n} li:nth-last-child(2)`)&&$(`${n} li:nth-last-child(2) .insert-step-btn`).prop("disabled",!1)):n.insertBefore(h.ui,$(n).children()[v.index])):$(n).append(h.ui),h.changedInputs=0,h.optionsChanged=!1,$(h.ui.querySelector(".input-form")).on("submit",function(t){t.preventDefault(),h.optionsChanged&&($(h.ui.querySelector("div.details")).find("input,select,textarea").each(function(e,t){d&&d(t),h.options[$(t).attr("name")]=$(t).val()}),e.run({index:h.index-1}),r.setUrlHashParameter("steps",e.toString()),h.optionsChanged=!1,h.changedInputs=0,p&&p(h))}),m&&$(h.ui.querySelectorAll(".target")).each(function(e,t){m(t,h)}),g&&g(h)},onComplete:function(t){if($(t.ui.querySelector(".loader")).hide(),$(t.ui.querySelector(".step-thumbnail")).show(),$(t.ui.querySelector(".loader")).hide(),t.imgElement.src=t.output,$(t.ui.querySelector(".download-step-btn")).on("click",function(){download(t.output,t.name+".png","image/png")}),e.modulesInfo().hasOwnProperty(t.name)){var n=e.modulesInfo(t.name).inputs,i=e.modulesInfo(t.name).outputs;for(var r in n)if(void 0!==t.options[r]){"input"===n[r].type.toLowerCase()&&$(t.ui.querySelector('div[name="'+r+'"] input')).val(t.options[r]),"input"===n[r].type.toLowerCase()&&$(t.ui.querySelector('div[name="'+r+'"] textarea')).val(t.options[r]),"select"===n[r].type.toLowerCase()&&$(t.ui.querySelector('div[name="'+r+'"] select')).find('option[value="'+t.options[r]+'"]').prop("selected",!0);var o=$(t.ui.querySelector('div[name="'+r+'"]'));v&&v(o)}for(var r in i)void 0!==t[r]&&$(t.ui.querySelector('div[name="'+r+'"] input,textarea')).val(t[r])}b&&b(t)},onRemove:function(e){e.ui.remove(),$(`${n} ${l}:nth-last-child(1) .insert-step-btn`).prop("disabled",!0),$("div[class^=imgareaselect-]").remove(),onRemoveCb&&onRemoveCb(e)},onDraw:function(e){$(e.ui.querySelector(".loader")).show(),$(e.ui.querySelector(".step-thumbnail")).hide(),h&&h(e)},notify:a}}"undefined"==typeof window&&(t.exports={DefaultHtmlStepUi:s}),t.exports=s},{"../../DOM/helpers":4,"../sequence/urlHash":11,"../step/intermediateHtmlStepUi":14,"./mapHtmlTypes":15}],14:[function(e,t,n){var i=e("../sequence/urlHash"),{updatePreviews:r}=e("../../DOM/insertPreview");t.exports=function(e,t,n){var o=n.getStepInsertTemplate,a=n.insertStepSel||".insert-step",s=n.insertUi,c=n.insertStepCb;function l(t){n=n||{};var r=$(insertStepSelectSel);if("none"!=r.val()){var o=r.val();sequencer.sequences[o]?sequenceLength=sequencer.sequences[o].length:sequencer.modules[o][1].length&&(sequenceLength=sequencer.modules[o][1].length),e.insertSteps(t+1,o).run({index:t}),i.setUrlHashParameter("steps",e.toString())}}function u(n){s(t,n);var i=$(`${a} select`).val();$(`${a} .info`).html(e.modulesInfo(i).description),$(`${a} .add-step-btn`).prop("disabled",!1)}return insertStep=function(i){var s=e.modulesInfo(),d=new DOMParser,p=o(t);p=d.parseFromString(p,"text/html").querySelector(".insert-step");var m=$(insertStepSelectSel);for(var f in m.html(""),s)void 0!==s[f]&&m.append('<option value="'+f+'">'+s[f].name+"</option>");$(`${a} .add-step-btn`).prop("disabled",!0),m.append('<option value="none" disabled selected>More modules...</option>'),$(n.quickBtnsSel).on("click",function(){$(n.quickBtnsSel).removeClass("selected"),$(this).addClass("selected"),newStep=$(this).attr("data-value"),m.val(newStep),u(),l(i),$(this).removeClass("selected")}),$(t.ui.querySelector(`${a} select`)).on("change",u),$(t.ui.querySelector(`${m} .add-step-btn`)).on("click",function(){l(i)}),r(t.output,n.quickBtnsSel),c&&c()},{insertStep:insertStep}}},{"../../DOM/insertPreview":5,"../sequence/urlHash":11}],15:[function(e,t,n){t.exports=function(e){var t;switch(e.type.toLowerCase()){case"integer":t=void 0!=e.min?"range":"number";break;case"select":t="select";break;case"percentage":t="number";break;case"float":t=void 0!=e.min?"range":"text";break;case"range":t="range";break;case"number":t="number";break;default:t="text"}return{...e,type:t}}},{}],16:[function(e,t,n){t.exports=function(e,t){"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js",{scope:e}).then(function(e){const t=e.installing;t.onstatechange=(()=>{console.log(t),"installed"===t.state&&location.reload()}),console.log("Registration successful, scope is:",e.scope)}).catch(function(e){console.log("Service worker registration failed, error:",e)}),"serviceWorker"in navigator&&caches.keys().then(function(e){e.forEach(function(e){$(t).append(" "+e)})}),$(t).click(function(){"serviceWorker"in navigator&&caches.keys().then(function(e){e.forEach(function(e){caches.delete(e)})}),location.reload()})}},{}],17:[function(e,t,n){t.exports=(()=>{self.addEventListener("install",e=>{console.log("Attempting to install service worker")}),self.addEventListener("activate",function(e){console.log("[ServiceWorker] Activate"),e.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(e){return e.startsWith("image-sequencer-")&&"image-sequencer-new-static-v3"!=e}).map(function(e){return caches.delete(e)}))}))}),self.addEventListener("fetch",function(e){e.respondWith(caches.open("image-sequencer-new-static-v3").then(function(t){return t.match(e.request).then(function(n){return n||fetch(e.request).then(function(n){return"GET"==e.request.method&&t.put(e.request,n.clone()),n})})}))})})},{}]},{},[1]);