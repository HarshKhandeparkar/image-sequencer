var defaultHtmlSequencerUi=require("./lib/sequencer/sequence/defaultHtmlSequencerUi"),setupCache=require("./lib/sw/cache.js"),DefaultHtmlStepUi=require("./lib/sequencer/step/defaultHtmlStepUi.js"),{setModuleSelector:setModuleSelector}=require("./lib/sequencer/sequence/setModuleSelector"),{getUrlHashParameter:getUrlHashParameter}=require("./lib/sequencer/sequence/urlHash.js"),{initializeSelect:initializeSelect,initializeModal:initializeModal,initializeTooltips:initializeTooltips}=require("./lib/DOM/initializeComponents"),{setScrollBtn:setScrollBtn,setCacheShortcut:setCacheShortcut}=require("./lib/DOM/helpers"),{setGifGenerator:setGifGenerator}=require("./lib/sequencer/sequence/gif"),setSaveSequence=require("./lib/sequencer/sequence/saveSequence");insertPreview=require("./lib/DOM/insertPreview"),window.onload=function(){sequencer=ImageSequencer(),$("#file-input-label").on("click",function(e){$("#fileInput").click()}),$("button#old-ui").on("click",function(){var e=window.location.toString(),t=e.substr(0,e.indexOf("examples/")+9)+"legacy/#steps="+getUrlHashParameter("steps");window.location=t}),setScrollBtn("#move-up"),setCacheShortcut(),initializeTooltips(),setSaveSequence(),sequencer.setUI(DefaultHtmlStepUi(sequencer));var e=defaultHtmlSequencerUi(sequencer);setModuleSelector(e),getUrlHashParameter("src")?sequencer.loadImage(getUrlHashParameter("src"),e.onLoad):sequencer.loadImage("images/tulips.png",e.onLoad);$("#resetButton").on("click",function(){confirm("Do you want to reset the sequence?")&&(window.location="/")}),$("#download-btn").click(function(){return download($(".step-thumbnail:last()").attr("src"),$(".step-thumbnail:last()").attr("alt")+".png","image/png"),!1}),$("body").on("click","button.remove",e.removeStepUi),setGifGenerator(),sequencer.setInputStep({dropZoneSelector:"#dropzone",fileInputSelector:"#fileInput",takePhotoSelector:"#take-photo",onLoad:function(e){var t=e.target,i=sequencer.images.image1.steps[0];i.output.src=t.result,sequencer.run({index:0}),i.options.step.imgElement.src=t.result,insertPreview.updatePreviews(t.result,"#addStep"),insertPreview.updatePreviews(sequencer.images.image1.steps[0].options.step.imgElement.src,".insert-step")},onTakePhoto:function(e){var t=sequencer.images.image1.steps[0];t.output.src=e,sequencer.run({index:0}),t.options.step.imgElement.src=e}}),setupCache(),getUrlHashParameter("src")?insertPreview.updatePreviews(getUrlHashParameter("src"),"#addStep"):insertPreview.updatePreviews("images/tulips.png","#addStep"),initializeSelect(),initializeModal()};